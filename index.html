<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neighborhood Stats Navigator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Visualization & Content Choices: 
        - Report Sections (Intro, Gov Sources, Aggregators, etc.): Presented as distinct, navigable views. Goal: Easy access to structured info. Method: HTML content blocks, Tailwind CSS. Interaction: Navigation clicks. Justification: Standard SPA pattern for clarity.
        - Data Source Details (e.g., Census Bureau, Niche.com): Displayed as cards within their respective sections, showing key attributes (data types, granularity, update frequency) and crucial commentary from the report. Goal: Summarize and highlight key aspects of each source. Method: HTML/Tailwind styled cards. Interaction: Read-only. Justification: Consistent and digestible presentation.
        - Comparative Table of Aggregators: Rendered as an HTML table. Goal: Allow direct comparison. Method: HTML table, Tailwind. Interaction: Static. Justification: Direct representation of report content.
        - Key Considerations & Recommendations: Presented as formatted text. Goal: Provide actionable advice. Method: HTML lists/paragraphs. Interaction: Read-only. Justification: Clarity for textual guidance.
        - Chart - Data Source Update Frequencies: A horizontal bar chart illustrating typical update lags/frequencies (e.g., Decennial, Annual, Monthly, Daily) for different categories of data sources mentioned in the report. Goal: Visually summarize data timeliness differences. Method: Chart.js (Canvas). Interaction: Static chart with tooltips. Justification: Enhances understanding of a key consideration.
        - New Feature: AI-Powered Neighborhood Insights. Goal: Provide synthesized overviews and pros/cons for specific neighborhoods using LLM. Method: HTML input search bar, buttons for triggering LLM calls, a text area for displaying results. Interaction: User types neighborhood, clicks button, AI response is displayed if neighborhood is found in hardcoded data; otherwise, a "not found" message appears. Justification: Directly addresses user's interest in specific neighborhood analysis, leveraging LLM for synthesis and providing a more flexible input method. Data for neighborhoods is hardcoded in JS for demonstration.
        - All textual content is extracted or synthesized directly from the provided report or generated by the LLM.
    -->
    <style>
        body { font-family: 'Inter', sans-serif; }
        .chart-container { position: relative; width: 100%; max-width: 700px; margin-left: auto; margin-right: auto; height: 350px; max-height: 400px; }
        @media (min-width: 768px) { .chart-container { height: 400px; } }
        .nav-link { transition: background-color 0.3s, color 0.3s; }
        .nav-link.active { background-color: #FBBF24; color: #1F2937; }
        .nav-link:not(.active):hover { background-color: #3B82F6; color: white; }
        .content-section { display: none; }
        .content-section.active { display: block; }
        .card-content h4 { margin-top: 0.5rem; }
        .card-content p, .card-content ul { margin-bottom: 0.5rem; font-size: 0.875rem; }
        .card-content ul { list-style-position: inside; }
        .critical-commentary { border-left: 4px solid #F59E0B; padding-left: 1rem; margin-top: 0.5rem; margin-bottom: 0.5rem; background-color: #FFFBEB; }
        .table-responsive { overflow-x: auto; }
        .table-responsive table th, .table-responsive table td { white-space: nowrap; padding: 0.5rem 1rem; }
        .loading-spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-left: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <header class="bg-sky-700 text-white p-4 shadow-md">
        <div class="container mx-auto flex flex-col md:flex-row justify-between items-center">
            <h1 class="text-2xl md:text-3xl font-bold">Neighborhood Stats Navigator</h1>
            <button id="mobileMenuButton" class="md:hidden p-2 rounded focus:outline-none focus:ring-2 focus:ring-sky-300">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
                </svg>
            </button>
        </div>
    </header>

    <nav id="mainNav" class="bg-sky-600 text-white shadow-md hidden md:block">
        <div class="container mx-auto flex flex-col md:flex-row md:justify-center space-y-2 md:space-y-0 md:space-x-2 p-2 text-center">
            <a href="#home" class="nav-link px-3 py-2 rounded-md text-sm font-medium active">Home</a>
            <a href="#gov-sources" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Government Sources</a>
            <a href="#aggregators" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Data Aggregators</a>
            <a href="#school-specialists" class="nav-link px-3 py-2 rounded-md text-sm font-medium">School Specialists</a>
            <a href="#crime-specialists" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Crime Specialists</a>
            <a href="#key-considerations" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Key Considerations</a>
            <a href="#recommendations" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Recommendations</a>
            <a href="#neighborhood-insights" class="nav-link px-3 py-2 rounded-md text-sm font-medium">Neighborhood Insights ✨</a>
        </div>
    </nav>

    <main class="container mx-auto p-4 md:p-6">
        <section id="home" class="content-section active">
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-2xl font-semibold text-sky-700 mb-4">Welcome to the Neighborhood Stats Navigator</h2>
                <p class="mb-4 text-slate-600">This application provides an interactive way to explore the "Comprehensive Guide to U.S. Neighborhood Statistics." It helps you understand various data sources for safety, schools, and demographics, along with key considerations for using this information effectively. Navigate through the sections to discover valuable resources and insights.</p>
                
                <h3 class="text-xl font-semibold text-sky-600 mt-6 mb-3">Executive Summary of the Report</h3>
                <p class="text-sm text-slate-700 leading-relaxed">The source report offers a detailed guide to accessing neighborhood statistics across the United States, with a particular focus on safety, educational institutions, and demographic profiles. It systematically examines official government sources, commercial data aggregators, and specialized platforms, detailing their unique strengths, levels of data granularity, update frequencies, and underlying methodologies. Key recommendations advocate for a multi-source approach, emphasizing the critical evaluation of data freshness and analytical methodologies, and the strategic utilization of comparison tools. This comprehensive framework aims to empower individuals and organizations to make well-informed decisions concerning real estate, relocation, or community assessment.</p>

                <h3 class="text-xl font-semibold text-sky-600 mt-6 mb-3">Introduction: Navigating Neighborhood Data</h3>
                <p class="text-sm text-slate-700 leading-relaxed mb-2">Understanding the intricate fabric of a neighborhood necessitates access to reliable and granular data. This guide defines key statistics (Safety, Schools, Demographics) and underscores the importance of trustworthy data for real estate, family decisions, urban planning, and business strategy.</p>
                
                <div class="mt-8">
                     <h3 class="text-xl font-semibold text-sky-600 mb-3">Data Source Update Frequencies (Illustrative)</h3>
                     <p class="text-sm text-slate-600 mb-4">The timeliness of data is a critical factor. This chart illustrates the typical update cycles or inherent lags for different categories of data sources discussed in the report. Shorter bars indicate more frequent updates or shorter lags.</p>
                    <div class="chart-container bg-slate-100 p-4 rounded-lg shadow">
                        <canvas id="updateFrequencyChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="gov-sources" class="content-section">
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-2xl font-semibold text-sky-700 mb-4">Official Government Data Sources</h2>
                <p class="mb-6 text-slate-600">This section details foundational data sources provided by U.S. government agencies. These are authoritative and comprehensive, forming the baseline for most neighborhood statistics, though they may have inherent update lags.</p>

                <div class="space-y-6">
                    <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">U.S. Census Bureau</h3>
                        <p><strong>Key Platforms:</strong> data.census.gov, QuickFacts, ACS, Decennial Census.</p>
                        <p><strong>Data Types:</strong> Extensive demographic, socio-economic, and housing characteristics.</p>
                        <p><strong>Granularity:</strong> States, counties, places, tribal areas, zip codes, congressional districts. QuickFacts for areas 5,000+ pop.</p>
                        <p><strong>Update Frequency:</strong> Decennial (10 yrs), ACS (annual 1-year & 5-year estimates), Economic Census (5 yrs).</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">"Synthetic Data" may be used for granular populations, implying statistical modeling. Accuracy at finer geographic levels is continuously refined (e.g., Esri's use of ACS data).</p>
                        </div>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">Federal Bureau of Investigation (FBI) Crime Data Explorer (CDE)</h3>
                        <p><strong>Data Types:</strong> Official crime statistics (violent & property), NIBRS incident details.</p>
                        <p><strong>Granularity:</strong> National, state, county, town.</p>
                        <p><strong>Update Frequency:</strong> Quarterly releases on CDE, but with an 8-10 month lag for final, non-preliminary data.</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">The 8-10 month lag affects usefulness for immediate decision-making. Transition to NIBRS improves data richness and granularity.</p>
                        </div>
                    </div>
                    
                    <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">Data.gov</h3>
                        <p><strong>Data Availability:</strong> Central portal for U.S. Government's open data; nearly 300,000 datasets from 100+ organizations.</p>
                        <p><strong>Update Frequency:</strong> Portal updated regularly; individual dataset frequency varies.</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">Functions as a data discovery layer, not a direct neighborhood analytics tool. Requires data processing skills to extract insights.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="aggregators" class="content-section">
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-2xl font-semibold text-sky-700 mb-4">Comprehensive Data Aggregators & Real Estate Platforms</h2>
                <p class="mb-6 text-slate-600">These platforms synthesize data from multiple sources, often including official statistics, proprietary analyses, and user-generated content, to offer a holistic and user-friendly view of neighborhoods.</p>

                <div class="space-y-6 mb-8">
                    <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">Niche.com</h3>
                        <p><strong>Data Categories:</strong> Rankings, grades, profiles for schools & neighborhoods (crime, demographics, housing, lifestyle).</p>
                        <p><strong>Granularity:</strong> Places (neighborhoods, cities, ZIP codes, etc.).</p>
                        <p><strong>Data Sources:</strong> Dept. of Education, U.S. Census, FBI, NOAA, user reviews/surveys.</p>
                        <p><strong>Update Frequency:</strong> Annually (large public datasets); Monthly (school/college submitted data).</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">Dual-layered strategy: official stats + experiential insights from reviews. Timely monthly processing for some data helps mitigate lags.</p>
                        </div>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">AreaVibes</h3>
                        <p><strong>Unique Feature:</strong> "Livability Score" (1-100) across 9 categories (Amenities, Commute, Cost of Living, Crime, etc.).</p>
                        <p><strong>Granularity:</strong> Cities, neighborhoods, specific addresses.</p>
                        <p><strong>Data Sources:</strong> U.S. Census (ACS), FBI, NCES, OpenStreetMap, EPA, C2ER, user ratings.</p>
                        <p><strong>Update Frequency:</strong> Not explicitly stated for overall data.</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">"Livability Score" is an interpretive metric based on a proprietary algorithm with specific weightings; may not align with all user priorities.</p>
                        </div>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">NeighborhoodScout</h3>
                        <p><strong>Focus:</strong> Accurate, comprehensive, neighborhood-specific crime, demographic, housing, school, and real estate trend analytics.</p>
                        <p><strong>Granularity:</strong> "Micro-neighborhood" / address-specific data.</p>
                        <p><strong>Data Sources:</strong> FBI (Final, Non-Preliminary), U.S. Census, NCES, HUD, FHFA, USGS, BLS etc.</p>
                        <p><strong>Update Frequency:</strong> Crime (annual, with 8-10 month lag); Real Estate (quarterly/annually).</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">Micro-granularity is appealing but may rely on modeling. Use of "Final, Non-Preliminary" FBI data prioritizes accuracy over immediacy for crime stats.</p>
                        </div>
                    </div>

                    <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">Trulia Neighborhoods</h3>
                        <p><strong>Focus:</strong> "Everyday life" and "local vibe" via "What Locals Say" (reviews/polls) and map overlays.</p>
                        <p><strong>Data Categories:</strong> Schools, safety/crime map, neighborliness, amenities, commute, demographics.</p>
                        <p><strong>Data Sources:</strong> Emphasis on user-generated content; specific sources for stats like schools/crime not detailed. Housing data from public records, listings.</p>
                        <p><strong>Update Frequency:</strong> Monthly (housing data); not explicit for other neighborhood stats.</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">Strength in qualitative "vibe" and housing market data. May serve as a complementary tool for users prioritizing transparently sourced quantitative stats.</p>
                        </div>
                    </div>
                </div>

                <h3 class="text-xl font-semibold text-sky-600 mt-8 mb-3">Comparative Table of Major Data Aggregators</h3>
                <div class="table-responsive shadow rounded-lg">
                    <table class="min-w-full divide-y divide-slate-200 bg-white">
                        <thead class="bg-slate-100">
                            <tr>
                                <th class="px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Platform Name</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Key Data Categories</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Granularity</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Primary Sources (Examples)</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Update Frequency</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Unique Features</th>
                                <th class="px-4 py-2 text-left text-xs font-medium text-slate-500 uppercase tracking-wider">Comparison Tools</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-slate-200 text-sm">
                            <tr>
                                <td class="px-4 py-2">Niche.com</td>
                                <td class="px-4 py-2">Safety, Schools, Demographics, Housing, Amenities, Cost of Living, Employment, Lifestyle</td>
                                <td class="px-4 py-2">City, Zip Code, Neighborhood, Places</td>
                                <td class="px-4 py-2">U.S. Census, FBI, Dept. of Edu, NOAA, Proprietary Surveys/Reviews</td>
                                <td class="px-4 py-2">Annually (public), Monthly (school/college specific)</td>
                                <td class="px-4 py-2">Rankings, Grades, User Reviews</td>
                                <td class="px-4 py-2">Implicit (rankings/profiles)</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2">AreaVibes</td>
                                <td class="px-4 py-2">Amenities, Commute, Cost of Living, Crime, Employment, Health & Safety, Housing, Schools, User Ratings</td>
                                <td class="px-4 py-2">City, Neighborhood, Address-Specific</td>
                                <td class="px-4 py-2">U.S. Census, FBI, NCES, OpenStreetMap, EPA, User Submissions</td>
                                <td class="px-4 py-2">Not Explicitly Stated</td>
                                <td class="px-4 py-2">Livability Score (A+ to F)</td>
                                <td class="px-4 py-2">Yes (Compare Cities)</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2">NeighborhoodScout</td>
                                <td class="px-4 py-2">Crime, Demographics, Housing, School Performance, Real Estate Trends/Forecasts</td>
                                <td class="px-4 py-2">Micro-neighborhood, Address-Specific</td>
                                <td class="px-4 py-2">U.S. Census, FBI, Dept. of Edu, NCES, HUD, FHFA, USGS, BLS</td>
                                <td class="px-4 py-2">Quarterly (real estate), Annually/Lagged (crime)</td>
                                <td class="px-4 py-2">Scout Vision™ Trends, Crime Risk Scores</td>
                                <td class="px-4 py-2">Yes (nationally comparable)</td>
                            </tr>
                            <tr>
                                <td class="px-4 py-2">Trulia Neighborhoods</td>
                                <td class="px-4 py-2">Schools, Safety & Crime, Neighborliness, Amenities, Commute, Demographics</td>
                                <td class="px-4 py-2">Neighborhood, Property Listing</td>
                                <td class="px-4 py-2">Public Records, User Submissions (housing); others not detailed</td>
                                <td class="px-4 py-2">Monthly (housing), Not Explicit (neighborhood stats)</td>
                                <td class="px-4 py-2">"What Locals Say", Map Overlays</td>
                                <td class="px-4 py-2">Limited</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>

        <section id="school-specialists" class="content-section">
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-2xl font-semibold text-sky-700 mb-4">Specialized Platforms for School Performance Data</h2>
                <p class="mb-6 text-slate-600">These platforms offer deep dives into K-12 education quality, providing detailed ratings, test scores, and demographic information specific to schools and districts.</p>
                <div class="space-y-6">
                    <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">GreatSchools.org</h3>
                        <p><strong>Data Coverage:</strong> 150,000+ K-12 public, private, charter schools.</p>
                        <p><strong>Data Types:</strong> 1-10 School Ratings, Themed Ratings (test scores, student progress, college readiness, equity), demographics, proficiency, college prep, community reviews, school climate data.</p>
                        <p><strong>Data Sources:</strong> 51 State Depts. of Education, College Board (AP).</p>
                        <p><strong>Update Frequency:</strong> Monthly data feed refresh.</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">Methodology evolves (e.g., 2020 update emphasized equity), which can change ratings. Integration of "school climate" data offers a more holistic view.</p>
                        </div>
                    </div>
                     <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">SchoolDigger.com</h3>
                        <p><strong>Data Coverage:</strong> 130,000+ schools, 18,500+ districts.</p>
                        <p><strong>Data Types:</strong> Basic info, yearly metrics (enrollment, teachers, race, free lunch), test scores, student metrics (absenteeism, graduation), SchoolDigger Rankings, spending per pupil.</p>
                        <p><strong>Data Sources:</strong> Internal sources, NCES, State Depts. of Education, U.S. Census.</p>
                        <p><strong>Update Frequency:</strong> Continuously via API; quarterly for bulk downloads.</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">Granular and historical data access often monetized via API subscription tiers. Useful for programmatic integration.</p>
                        </div>
                    </div>
                    <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">The Nation's Report Card (NAEP)</h3>
                        <p><strong>Focus:</strong> Largest nationally representative assessment of U.S. student knowledge (K-12).</p>
                        <p><strong>Data Types:</strong> Student performance results (national, state, district), assessment items, long-term trends.</p>
                        <p><strong>Update Frequency:</strong> Provides info on upcoming/recent assessments (not continuous daily/monthly updates).</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">Serves as a macro-level benchmark for broad educational trends, not for granular neighborhood-level school assessment.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="crime-specialists" class="content-section">
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-2xl font-semibold text-sky-700 mb-4">Specialized Resources for Crime and Safety Data</h2>
                <p class="mb-6 text-slate-600">These resources offer more focused and often more timely insights into neighborhood safety, complementing official government data, which can have significant lags.</p>
                 <div class="space-y-6">
                    <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">CrimeMapping.com & SpotCrime.com</h3>
                        <p><strong>Focus:</strong> Mapping crime incidents, often sourcing data directly from local law enforcement.</p>
                        <p><strong>CrimeMapping.com:</strong> Extracts data from agency RMS, daily updates, max 180 days display, generalized addresses, email alerts. Omits sensitive crimes.</p>
                        <p><strong>SpotCrime.com:</strong> Collects from police agencies, "validated sources," news reports, 911 CAD. Aims for current events, street block granularity.</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">Offer more immediacy than FBI data but trade-offs exist. Omission of sensitive crimes (CrimeMapping) or potential inaccuracies (SpotCrime user feedback) mean data isn't always complete/fully verified. Highlight open data advocacy.</p>
                        </div>
                    </div>
                    <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">Real-Time Crime Index (RTCI)</h3>
                        <p><strong>Focus:</strong> Sample of reported crime data from hundreds of agencies, aiming to mimic national trends with minimal lag.</p>
                        <p><strong>Data Types:</strong> Primarily murder rates, but can show all crime types for specific agencies.</p>
                        <p><strong>Update Frequency:</strong> Mid-month updates for data from ~45 days prior.</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">Bridges gap between official lags and hyper-local immediacy. Offers a more current view of *trends* but acknowledges data variability.</p>
                        </div>
                    </div>
                    <div class="border border-slate-200 rounded-lg p-4 shadow-sm card-content">
                        <h3 class="text-xl font-medium text-sky-600">Esri Crime Indexes</h3>
                        <p><strong>Focus:</strong> Provides *relative risk* of specific crime types, not actual crime counts.</p>
                        <p><strong>Data Source:</strong> Applied Geographic Solutions (AGS).</p>
                        <p><strong>Granularity:</strong> Block group base level and higher.</p>
                        <p><strong>Use Cases:</strong> Law enforcement, research, real estate, public health for pattern identification, resource allocation, site strategy.</p>
                        <div class="critical-commentary">
                            <h4 class="font-semibold text-amber-700">Critical Commentary:</h4>
                            <p class="text-sm">Represents a shift to predictive risk assessment. Useful for strategic planning rather than historical incident understanding.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="key-considerations" class="content-section">
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-2xl font-semibold text-sky-700 mb-4">Key Considerations for Effective Data Utilization</h2>
                <p class="mb-6 text-slate-600">Effectively using neighborhood statistics requires a critical understanding of data attributes and methodologies. Consider these factors when evaluating information.</p>
                <div class="space-y-4 text-sm">
                    <div>
                        <h3 class="text-lg font-semibold text-sky-600">📊 Understanding Data Granularity</h3>
                        <p>Refers to the level of detail (national, state, city, zip, block, address). Appropriate level depends on needs. Higher granularity might mean more statistical modeling.</p>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-sky-600">⏱️ Assessing Data Freshness and Update Frequency</h3>
                        <p>Ranges from decennial to daily. More frequent updates are better for dynamic data like crime/real estate, but highly current data might be preliminary. Balance immediacy with official validation (e.g., FBI's 8-10 month lag vs. daily crime maps).</p>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-sky-600">🔍 Evaluating Data Sources and Methodologies</h3>
                        <p>Origin (government, commercial, user-generated) and methodology (direct enumeration, algorithms, modeling) impact reliability and bias. User reviews offer qualitative insights; official stats are objective but may lack local nuance. Ratings can change based on evolving methodologies (e.g., GreatSchools emphasizing equity).</p>
                    </div>
                    <div>
                        <h3 class="text-lg font-semibold text-sky-600">🆚 Leveraging Comparison Tools</h3>
                        <p>Some platforms offer direct comparison (e.g., AreaVibes), others provide nationally comparable data (e.g., NeighborhoodScout). Essential for systematic evaluation.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="recommendations" class="content-section">
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-2xl font-semibold text-sky-700 mb-4">Conclusion and Recommendations</h2>
                <p class="mb-6 text-slate-600">Accessing comprehensive neighborhood statistics requires a strategic, multi-faceted approach. The optimal strategy depends on your specific needs for granularity, timeliness, and the type of insight sought.</p>

                <h3 class="text-xl font-semibold text-sky-600 mt-6 mb-3">Synthesizing the Best Approach for Different User Needs:</h3>
                <ul class="list-disc pl-5 space-y-2 text-sm text-slate-700">
                    <li><strong>Foundational Demographics & Socio-economics:</strong> Start with U.S. Census Bureau (data.census.gov, ACS).</li>
                    <li><strong>Official Crime Statistics:</strong> Use FBI Crime Data Explorer (CDE), noting the lag.</li>
                    <li><strong>Holistic Overviews & Qualitative Insights:</strong> Niche.com, AreaVibes.</li>
                    <li><strong>Hyper-Local Data (Real Estate, Crime Risk):</strong> NeighborhoodScout.</li>
                    <li><strong>Current Crime Mapping:</strong> CrimeMapping.com, SpotCrime.com (understand limitations).</li>
                    <li><strong>Detailed School Performance:</strong> GreatSchools.org, SchoolDigger.com.</li>
                    <li><strong>Macro-Level Educational Benchmarks:</strong> The Nation's Report Card (NAEP).</li>
                </ul>

                <h3 class="text-xl font-semibold text-sky-600 mt-6 mb-3">Actionable Steps for Accessing and Interpreting Neighborhood Statistics:</h3>
                <ol class="list-decimal pl-5 space-y-2 text-sm text-slate-700">
                    <li><strong>Define Priorities:</strong> Identify critical aspects (safety, schools, demographics, etc.).</li>
                    <li><strong>Start with Official Sources:</strong> Establish a demographic foundation (Census) and understand official crime trends from the FBI CDE.</li>
                    <li><strong>Layer with Aggregators:</strong> Employ platforms like Niche, AreaVibes, or NeighborhoodScout for a synthesized view, leveraging their unique features and user-generated content for qualitative insights into community character.</li>
                    <li><strong>Drill Down with Specialized Platforms:</strong> For in-depth school analysis, use GreatSchools or SchoolDigger. For the most current crime mapping, consult CrimeMapping.com or SpotCrime.com.</li>
                    <li><strong>Cross-Reference Data:</strong> Due to varying methodologies, update frequencies, and potential data omissions across platforms, it is essential to cross-reference information from multiple sources to gain a comprehensive and balanced understanding.
                    <li><strong>Understand Granularity and Lag:</strong> Be acutely aware of the level of detail provided by each source and how recently the data was updated, particularly for time-sensitive decisions.</li>
                    <li><strong>Consider the "Vibe":</strong> Use platforms that incorporate local reviews (e.g., Niche, Trulia) for invaluable qualitative insights into the community's character and lived experience, complementing the numerical data.</li>
                </ol>
                <p class="mt-4 text-sm text-slate-700">By adopting this multi-source, critical approach, users can effectively navigate the complex landscape of U.S. neighborhood statistics to make well-informed and confident decisions.</p>
            </div>
        </section>

        <section id="neighborhood-insights" class="content-section">
            <div class="bg-white p-6 rounded-lg shadow">
                <h2 class="text-2xl font-semibold text-sky-700 mb-4">Neighborhood Insights ✨ Powered by AI</h2>
                <p class="mb-6 text-slate-600">Enter a neighborhood name to get an AI-generated overview or a pros and cons analysis based on key data points from our pre-defined list of Long Island neighborhoods.</p>

                <div class="mb-4">
                    <label for="neighborhoodInput" class="block text-sm font-medium text-slate-700 mb-2">Enter Neighborhood (e.g., Plainview, NY):</label>
                    <input type="text" id="neighborhoodInput" placeholder="e.g., Plainview, NY" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-sky-500 focus:border-sky-500 sm:text-sm rounded-md">
                </div>

                <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-3 mb-6">
                    <button id="generateOverviewBtn" class="bg-sky-700 text-white px-4 py-2 rounded-md hover:bg-sky-800 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 flex items-center justify-center">
                        Generate Overview ✨ <span id="overviewSpinner" class="loading-spinner hidden"></span>
                    </button>
                    <button id="analyzeProsConsBtn" class="bg-amber-600 text-white px-4 py-2 rounded-md hover:bg-amber-700 focus:outline-none focus:ring-2 focus:ring-amber-500 focus:ring-offset-2 flex items-center justify-center">
                        Analyze Pros & Cons ✨ <span id="prosConsSpinner" class="loading-spinner hidden"></span>
                    </button>
                </div>

                <div id="aiOutput" class="bg-slate-100 p-4 rounded-lg shadow-inner min-h-[150px] text-slate-700 text-sm leading-relaxed whitespace-pre-wrap">
                    Your AI-generated insights will appear here. Please enter a neighborhood from our list (e.g., Plainview, NY, Syosset, NY, Dix Hills, NY, etc.) for analysis.
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-sky-700 text-white text-center p-4 mt-8">
        <p class="text-sm">&copy; 2025 Neighborhood Stats Navigator. Information based on the "Comprehensive Guide to U.S. Neighborhood Statistics" report.</p>
    </footer>

    <script>
        const navLinks = document.querySelectorAll('.nav-link');
        const contentSections = document.querySelectorAll('.content-section');
        const mobileMenuButton = document.getElementById('mobileMenuButton');
        const mainNav = document.getElementById('mainNav');

        function updateActiveContent(hash) {
            contentSections.forEach(section => {
                if (section.id === hash.substring(1)) {
                    section.classList.add('active');
                } else {
                    section.classList.remove('active');
                }
            });

            navLinks.forEach(link => {
                if (link.getAttribute('href') === hash) {
                    link.classList.add('active');
                } else {
                    link.classList.remove('active');
                }
            });
        }
        
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                history.pushState(null, null, targetId);
                updateActiveContent(targetId);
                if (mainNav.classList.contains('block') && mobileMenuButton.offsetParent !== null) { // if mobile menu is open
                    mainNav.classList.add('hidden');
                    mainNav.classList.remove('block');
                }
                window.scrollTo(0, 0);
            });
        });

        mobileMenuButton.addEventListener('click', () => {
            mainNav.classList.toggle('hidden');
            mainNav.classList.toggle('block');
        });
        
        window.addEventListener('popstate', () => {
            updateActiveContent(window.location.hash || '#home');
        });

        // Initial load
        updateActiveContent(window.location.hash || '#home');

        // Chart.js: Update Frequency Chart
        const ctx = document.getElementById('updateFrequencyChart').getContext('2d');
        const updateFrequencyChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: ['Decennial Census', 'ACS (Annual)', 'FBI CDE (Final)', 'RTCI (Trends)', 'Aggregators (Public Data)', 'Aggregators (Direct Updates)', 'School Data (e.g. GreatSchools)', 'Hyperlocal Crime Maps'],
                datasets: [{
                    label: 'Typical Update Lag/Cycle (Lower is more frequent/less lag)',
                    data: [3650, 365, 300, 45, 365, 30, 30, 1], // Representing days approx. for lag/cycle
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(255, 159, 64, 0.7)',
                        'rgba(255, 205, 86, 0.7)',
                        'rgba(75, 192, 192, 0.7)',
                        'rgba(54, 162, 235, 0.7)',
                        'rgba(153, 102, 255, 0.7)',
                        'rgba(201, 203, 207, 0.7)',
                        'rgba(100, 220, 100, 0.7)'
                    ],
                    borderColor: [
                        'rgb(255, 99, 132)',
                        'rgb(255, 159, 64)',
                        'rgb(255, 205, 86)',
                        'rgb(75, 192, 192)',
                        'rgb(54, 162, 235)',
                        'rgb(153, 102, 255)',
                        'rgb(201, 203, 207)',
                        'rgb(100, 220, 100)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                indexAxis: 'y',
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    x: {
                        beginAtZero: true,
                        title: {
                            display: true,
                            text: 'Approximate Lag / Update Cycle in Days (Logarithmic Scale)'
                        },
                        type: 'logarithmic', // Using log scale for better visualization of wide range
                         ticks: {
                            callback: function(value, index, values) {
                                if (value === 3650) return '10 Years';
                                if (value === 365) return '1 Year';
                                if (value === 300) return '~10 Months';
                                if (value === 45) return '~1.5 Months';
                                if (value === 30) return '1 Month';
                                if (value === 1) return 'Daily';
                                return null; 
                            }
                        }
                    },
                    y: {
                         ticks: {
                            autoSkip: false,
                            maxRotation: 0,
                            minRotation: 0,
                             font: {
                                size: 10
                            }
                        }
                    }
                },
                plugins: {
                    legend: {
                        display: false
                    },
                    tooltip: {
                        callbacks: {
                            label: function(context) {
                                let label = context.dataset.label || '';
                                if (label) {
                                    label += ': ';
                                }
                                if (context.parsed.x !== null) {
                                    let days = context.parsed.x;
                                    if (days === 3650) label += 'Approx. 10 years';
                                    else if (days === 365) label += 'Approx. 1 year';
                                    else if (days === 300) label += 'Approx. 8-10 months';
                                    else if (days === 45) label += 'Approx. 45 days';
                                    else if (days === 30) label += 'Approx. 1 month';
                                    else if (days === 1) label += 'Approx. Daily/Near Real-Time';
                                    else label += days + ' days';
                                }
                                return label;
                            }
                        }
                    }
                }
            }
        });

        // Hardcoded Neighborhood Data for LLM
        const neighborhoodData = {
            "PLAINVIEW, NY": {
                "Overall Livability": "A+",
                "Public Schools": "A+ (Plainview-Old Bethpage CSD)",
                "Safety/Crime": "Very low (70% lower than national average, CAP Index 1/10)",
                "Median Home Price": "$889,500 (April 2025)",
                "Median Household Income": "$185,531",
                "Cost of Living Index": "135.2% of national average",
                "Demographics": "Population ~27,660, White 72%, Asian 21%, Hispanic 5%",
                "Notes": "Strong community, numerous shopping/dining, central Long Island location, good access to parks."
            },
            "OLD BETHPAGE, NY": {
                "Overall Livability": "A+",
                "Public Schools": "A+ (Plainview-Old Bethpage CSD)",
                "Safety/Crime": "Very safe, comparable to Plainview",
                "Median Home Price": "$1,000,000 (April 2025)",
                "Median Household Income": "$186,776",
                "Cost of Living Index": "Very high, comparable to Plainview",
                "Demographics": "Population ~6,403, White 80.6%, Asian 15.7%",
                "Notes": "Shares services with Plainview, quiet suburban feel."
            },
            "SYOSSET, NY": {
                "Overall Livability": "A+",
                "Public Schools": "A+ (Syosset CSD - consistently top-ranked)",
                "Safety/Crime": "Very safe, among safest in Nassau County",
                "Median Home Price": "$1,924,500 (latest data, may vary)",
                "Median Household Income": "$187,936",
                "Cost of Living Index": "135.2% of national average",
                "Demographics": "Affluent community, high education levels",
                "Notes": "Exceptional academic reputation, convenient LIRR access to NYC."
            },
            "JERICHO, NY": {
                "Overall Livability": "A+",
                "Public Schools": "A+ (Jericho UFSD - consistently top-tier)",
                "Safety/Crime": "Very safe, noted for peaceful streets",
                "Median Home Price": "$1,000,000 - $2,500,000 (range)",
                "Median Household Income": "$200,278",
                "Cost of Living Index": "Extremely high",
                "Demographics": "Diverse, affluent, high education levels",
                "Notes": "One of NY's most highly-regarded school districts, strong community."
            },
            "MELVILLE, NY": {
                "Overall Livability": "A+",
                "Public Schools": "A+ (served by Half Hollow Hills CSD, some Syosset CSD)",
                "Safety/Crime": "Low crime (DoorProfit A score)",
                "Median Home Price": "$710,700",
                "Median Household Income": "$156,063",
                "Cost of Living Index": "High, slightly lower than Nassau counterparts",
                "Demographics": "Population ~19,187, predominantly white, attracts retirees",
                "Notes": "Significant business hub, good highway access, parks, coffee shops."
            },
            "EAST NORTHPORT, NY": {
                "Overall Livability": "A",
                "Public Schools": "A (Northport-East Northport UFSD or Elwood CSD)",
                "Safety/Crime": "Very safe",
                "Median Home Price": "$601,300",
                "Median Household Income": "$140,000 (approx.)",
                "Cost of Living Index": "High, generally more affordable than Nassau County",
                "Demographics": "Population ~19,672, predominantly white, can lean conservative",
                "Notes": "Rural feel, tight-knit community, close to beaches/parks. Some concerns about main road upkeep and specific social issues in reviews."
            },
            "DIX HILLS, NY": {
                "Overall Livability": "A+",
                "Public Schools": "A+ (Half Hollow Hills CSD and Commack UFSD)",
                "Safety/Crime": "Extremely low crime (CAP Index 1/10)",
                "Median Home Price": "$999,999 (April 2025)",
                "Median Household Income": "$180,483",
                "Cost of Living Index": "Very high, comparable to Syosset/Jericho",
                "Demographics": "Population ~25,042, less diverse, young professionals",
                "Notes": "Affluent, large properties, quiet residential areas, good highway access. Lacks a walkable downtown."
            }
        };

        const neighborhoodInput = document.getElementById('neighborhoodInput');
        const generateOverviewBtn = document.getElementById('generateOverviewBtn');
        const analyzeProsConsBtn = document.getElementById('analyzeProsConsBtn');
        const aiOutput = document.getElementById('aiOutput');
        const overviewSpinner = document.getElementById('overviewSpinner');
        const prosConsSpinner = document.getElementById('prosConsSpinner');

        async function callGeminiAPI(prompt, spinnerElement) {
            aiOutput.innerHTML = ''; // Clear previous output
            spinnerElement.classList.remove('hidden'); // Show spinner

            let chatHistory = [];
            chatHistory.push({ role: "user", parts: [{ text: prompt }] });
            const payload = { contents: chatHistory };
            const apiKey = ""; // Leave as-is for Canvas runtime
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                const result = await response.json();
                if (result.candidates && result.candidates.length > 0 &&
                    result.candidates[0].content && result.candidates[0].content.parts &&
                    result.candidates[0].content.parts.length > 0) {
                    const text = result.candidates[0].content.parts[0].text;
                    aiOutput.innerText = text;
                } else {
                    aiOutput.innerText = "Error: Could not get a valid response from the AI. Please try again.";
                    console.error("Unexpected API response structure:", result);
                }
            } catch (error) {
                aiOutput.innerText = "Error: Failed to connect to the AI. Please check your network connection or try again later.";
                console.error("Gemini API call failed:", error);
            } finally {
                spinnerElement.classList.add('hidden'); // Hide spinner
            }
        }

        function getNeighborhoodData(input) {
            const normalizedInput = input.trim().toUpperCase();
            for (const key in neighborhoodData) {
                if (key.includes(normalizedInput) || normalizedInput.includes(key)) {
                    return { name: key, data: neighborhoodData[key] };
                }
            }
            return null;
        }

        generateOverviewBtn.addEventListener('click', () => {
            const userInput = neighborhoodInput.value;
            const foundNeighborhood = getNeighborhoodData(userInput);

            if (foundNeighborhood) {
                const data = foundNeighborhood.data;
                let dataString = `Overall Livability: ${data["Overall Livability"]}\n`;
                dataString += `Public Schools: ${data["Public Schools"]}\n`;
                dataString += `Safety/Crime: ${data["Safety/Crime"]}\n`;
                dataString += `Median Home Price: ${data["Median Home Price"]}\n`;
                dataString += `Median Household Income: ${data["Median Household Income"]}\n`;
                dataString += `Cost of Living Index: ${data["Cost of Living Index"]}\n`;
                dataString += `Demographics: ${data["Demographics"]}\n`;
                dataString += `Notes: ${data["Notes"]}\n`;

                const prompt = `Given the following data about ${foundNeighborhood.name}:\n\n${dataString}\n\nGenerate a concise overview of this neighborhood, focusing on its key characteristics regarding safety, schools, demographics, and cost of living. Highlight its main advantages and any notable aspects.`;
                callGeminiAPI(prompt, overviewSpinner);
            } else {
                aiOutput.innerText = "Neighborhood not found in our predefined list. Please try again with a more exact term, like 'Plainview, NY' or 'Dix Hills, NY'. Our current data covers Plainview, Old Bethpage, Syosset, Jericho, Melville, East Northport, and Dix Hills.";
            }
        });

        analyzeProsConsBtn.addEventListener('click', () => {
            const userInput = neighborhoodInput.value;
            const foundNeighborhood = getNeighborhoodData(userInput);

            if (foundNeighborhood) {
                const data = foundNeighborhood.data;
                let dataString = `Overall Livability: ${data["Overall Livability"]}\n`;
                dataString += `Public Schools: ${data["Public Schools"]}\n`;
                dataString += `Safety/Crime: ${data["Safety/Crime"]}\n`;
                dataString += `Median Home Price: ${data["Median Home Price"]}\n`;
                dataString += `Median Household Income: ${data["Median Household Income"]}\n`;
                dataString += `Cost of Living Index: ${data["Cost of Living Index"]}\n`;
                dataString += `Demographics: ${data["Demographics"]}\n`;
                dataString += `Notes: ${data["Notes"]}\n`;

                const prompt = `Based on the following characteristics of ${foundNeighborhood.name}:\n\n${dataString}\n\nList the main advantages (pros) and disadvantages (cons) of living there. Format the output with clear "Pros:" and "Cons:" headings.`;
                callGeminiAPI(prompt, prosConsSpinner);
            } else {
                aiOutput.innerText = "Neighborhood not found in our predefined list. Please try again with a more exact term, like 'Plainview, NY' or 'Dix Hills, NY'. Our current data covers Plainview, Old Bethpage, Syosset, Jericho, Melville, East Northport, and Dix Hills.";
            }
        });
    </script>
</body>
</html>

